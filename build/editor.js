(()=>{"use strict";const e=window.wp.i18n;window.wp.blockEditor,"undefined"!=typeof wp&&(wp.data.dispatch("core/block-editor").registerInserterMediaCategory({name:"astrobin-my-pictures",labels:{name:(0,e.__)("AstroBin | My pictures","mosne-astrobin"),search_items:(0,e.__)("Search by title","mosne-astrobin")},mediaType:"image",async fetch(e={}){const a={limit:e.per_page,type:"my_pictures"};console.log(e);const t={...e,...a},r={per_page:"page_size",search:"term",page:"page"},s=new URL(`${mosneAstroBin.apiUrl}/search`);Object.entries(t).forEach((([e,a])=>{const t=r[e]||e;s.searchParams.set(t,a)}));const o=await window.fetch(s,{headers:{"X-WP-Nonce":mosneAstroBin.nonce}});return((await o.json()).objects||[]).map((e=>({sourceId:e.id,id:void 0,title:e.title,hash:e.hash,caption:`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a>`,previewUrl:e.url_duckduckgo,url:e.url_real})))},getReportUrl:({sourceId:e})=>`https://www.astrobin.com/api/v1/image/${e}/`,isExternalResource:!0}),wp.data.dispatch("core/block-editor").registerInserterMediaCategory({name:"astrobin-public-pictures",labels:{name:(0,e.__)("AstroBin | Public pictures","mosne-astrobin"),search_items:(0,e.__)("Search by title","mosne-astrobin")},mediaType:"image",async fetch(e={}){const a={limit:e.per_page,type:"public_pictures"};console.log(e);const t={...e,...a},r={per_page:"page_size",search:"term",page:"page"},s=new URL(`${mosneAstroBin.apiUrl}/search`);Object.entries(t).forEach((([e,a])=>{const t=r[e]||e;s.searchParams.set(t,a)}));const o=await window.fetch(s,{headers:{"X-WP-Nonce":mosneAstroBin.nonce}});return((await o.json()).objects||[]).map((e=>({sourceId:e.id,id:void 0,title:e.title,hash:e.hash,caption:`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a>`,previewUrl:e.url_duckduckgo,url:e.url_real})))},getReportUrl:({sourceId:e})=>`https://www.astrobin.com/api/v1/image/${e}/`,isExternalResource:!0}),wp.data.dispatch("core/block-editor").registerInserterMediaCategory({name:"astrobin-other-user-gallery",labels:{name:(0,e.__)("AstroBin | Users' galleries","mosne-astrobin"),search_items:(0,e.__)("Search by username","mosne-astrobin")},mediaType:"image",async fetch(e={}){const a={limit:e.per_page,type:"user_gallery"};console.log(e);const t={...e,...a},r={per_page:"page_size",search:"username",page:"page"},s=new URL(`${mosneAstroBin.apiUrl}/search`);Object.entries(t).forEach((([e,a])=>{const t=r[e]||e;s.searchParams.set(t,a)}));const o=await window.fetch(s,{headers:{"X-WP-Nonce":mosneAstroBin.nonce}});return((await o.json()).objects||[]).map((e=>({sourceId:e.id,id:void 0,title:e.title,hash:e.hash,caption:`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a>`,previewUrl:e.url_duckduckgo,url:e.url_real})))},getReportUrl:({sourceId:e})=>`https://www.astrobin.com/api/v1/image/${e}/`,isExternalResource:!0}),wp.data.dispatch("core/block-editor").registerInserterMediaCategory({name:"astrobin-image-of-the-day",labels:{name:(0,e.__)("AstroBin | Image of the day","mosne-astrobin"),search_items:(0,e.__)("Browse past images","mosne-astrobin")},mediaType:"image",async fetch(e={}){const a={limit:e.per_page,type:"image_of_the_day"};console.log(e);const t={...e,...a},r={per_page:"page_size",page:"page"},s=new URL(`${mosneAstroBin.apiUrl}/search`);Object.entries(t).forEach((([e,a])=>{const t=r[e]||e;s.searchParams.set(t,a)}));const o=await window.fetch(s,{headers:{"X-WP-Nonce":mosneAstroBin.nonce}});return((await o.json()).objects||[]).map((e=>({sourceId:e.id,id:void 0,title:e.title,hash:e.hash,caption:e.date?`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a><br/><em>Image of the Day: ${new Date(e.date).toLocaleDateString()}</em>`:`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a>`,previewUrl:e.url_duckduckgo,url:e.url_real})))},getReportUrl:({sourceId:e})=>`https://www.astrobin.com/api/v1/image/${e}/`,isExternalResource:!0}),wp.data.dispatch("core/block-editor").registerInserterMediaCategory({name:"astrobin-top-picks",labels:{name:(0,e.__)("AstroBin | Top Picks","mosne-astrobin"),search_items:(0,e.__)("Explore top picks","mosne-astrobin")},mediaType:"image",async fetch(e={}){const a={limit:e.per_page,type:"top_picks"};console.log(e);const t={...e,...a},r={per_page:"page_size",page:"page"},s=new URL(`${mosneAstroBin.apiUrl}/search`);Object.entries(t).forEach((([e,a])=>{const t=r[e]||e;s.searchParams.set(t,a)}));const o=await window.fetch(s,{headers:{"X-WP-Nonce":mosneAstroBin.nonce}});return((await o.json()).objects||[]).map((e=>({sourceId:e.id,id:void 0,title:e.title,hash:e.hash,caption:`<a href="https://app.astrobin.com/i/${e.hash}" target="_blank" rel="nofollow">${e.title}</a> by <a href="https://app.astrobin.com/u/${e.user}" target="_blank" rel="nofollow">${e.user}</a>`,previewUrl:e.url_duckduckgo,url:e.url_real})))},getReportUrl:({sourceId:e})=>`https://www.astrobin.com/api/v1/image/${e}/`,isExternalResource:!0}))})();